<svg version="1.1" baseProfile="full" width="919" height="1353" viewbox="0 0 919 1353" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" style="font:normal  12pt Helvetica, Helvetica, sans-serif;;stroke-linejoin:round;stroke-linecap:round">
  <desc >// www.nomnoml.com

#.wip: fill=#D2AA99 title=bold dashed

[src.app|
  stack: src.app.drawable.stack
  win: src.app.drawable.win
  palettes: src.app.palettes
  skins: src.app.skins
  fonts: src.app.fonts
  |
  init()
  load_scene(scene)
  |
  [&lt;package&gt; drawable|
    [&lt;table&gt;drawable|
      app: src.app
      parent: src.app.drawable
      root: src.app.drawable
      abs_size: table
      abs_pos: table
      rel_pos: table
      |
      pos?: table
      size?: table
      colors?: table
      abs_colors?: table
      closed?: boolean
      expander?: boolean
      ||
      init()
      draw()
      draw_recursive()
      update_geometry()
      update_geometry_recursive()
      update_size()
      update_pos()
      update_expand()
      update_colors()
      |
      on_draw?()
      on_init?()
      on_hover?()
      on_click?()
    ]
    [win|
      parent: nil
      flags: table
      scale: integer
      hovered: src.app.drawable
      |
      init()
      resize(w, h)
      keypressed(key)
      mousemoved(x, y)
      mousepressed(x, y, button)
    ] -&gt; [drawable]
    [&lt;package&gt;gui|
      [rect|
        skin?
        image?
        |
        init()
        update_expand()
        update_image()
        draw()
      ]
      [&lt;wip&gt;text|
        text: string
        |
        text_obj?: love.Text
        wrap?: boolean
        |
        init()
        update()
        draw()
      ]
    ] -&gt; [drawable]
    [drawable] -/- [stack|
      push(drawable)
      pop(element)
      touch(point)
    ]
    [drawable] -/- [skin|
      atlas
      |
      grid?: lib.image.grid
      marks?: table
      |
      init()
    ]
  ]

  [drawable] -/- [fonts|
    current: love.Font
    normal: love.Font
    bold: love.Font
    |
    init()
    switch(name)
  ]
  [drawable] -/- [palettes|
    main: lib.image.palette
    name_to_color: table
    name_to_index: table
    names: table
  ]
  [drawable] -/- [skins|
    gui: src.app.drawable.skin
    mc_gui_rect: src.app.drawable.skin
  ]
]
</desc>
  <rect x="0" y="0" height="1353" width="919" style="stroke:none; fill:transparent;"></rect>
  <rect x="28.5" y="28.5" height="1297" width="863" data-name="src.app" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M28.5 59.5 L891.5 59.5" data-name="src.app" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M28.5 150.5 L891.5 150.5" data-name="src.app" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M28.5 196.5 L891.5 196.5" data-name="src.app" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="460" y="50" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="src.app">src.app</text>
  <text x="36.5" y="81" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">stack: src.app.drawable.stack</text>
  <text x="36.5" y="96" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">win: src.app.drawable.win</text>
  <text x="36.5" y="111" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">palettes: src.app.palettes</text>
  <text x="36.5" y="126" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">skins: src.app.skins</text>
  <text x="36.5" y="141" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">fonts: src.app.fonts</text>
  <text x="36.5" y="172" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">init()</text>
  <text x="36.5" y="187" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="src.app">load_scene(scene)</text>
  <rect x="138.5" y="1159.5" height="138" width="155" data-name="fonts" style="stroke:#33322E;fill:#fdf6e3;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M138.5 1190.5 L293.5 1190.5" data-name="fonts" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M138.5 1251.5 L293.5 1251.5" data-name="fonts" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="216" y="1181" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="fonts">fonts</text>
  <text x="146.5" y="1212" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="fonts">current: love.Font</text>
  <text x="146.5" y="1227" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="fonts">normal: love.Font</text>
  <text x="146.5" y="1242" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="fonts">bold: love.Font</text>
  <text x="146.5" y="1273" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="fonts">init()</text>
  <text x="146.5" y="1288" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="fonts">switch(name)</text>
  <rect x="56.5" y="255.5" height="864" width="748" data-name="drawable" style="stroke:#33322E;fill:#fdf6e3;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M56.5 255.5 L56.5 224.5 L144.5 224.5 L144.5 255.5 Z" data-name="drawable" style="stroke:#33322E;fill:#fdf6e3;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M56.5 255.5 L804.5 255.5" data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="64.5" y="246" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">drawable</text>
  <path d="M201 510.5 L201 559.5 L216 574.7 L216 574.7 " data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M207.5 573.7 L216 574.7 L215.1 566.2 L220.6 579.5 Z" data-name="drawable" style="stroke:#33322E;fill:#33322E;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M567 539.5 L567 559.5 L552 574.7 L552 574.7 " data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M552.9 566.2 L552 574.7 L560.5 573.7 L547.4 579.5 Z" data-name="drawable" style="stroke:#33322E;fill:#33322E;stroke-dasharray:none;stroke-width:3;"></path>
  <rect x="134.5" y="579.5" height="333" width="500" data-name="drawable" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M134.5 610.5 L134.5 610.5" data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M134.5 610.5 L634.5 610.5" data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M134.5 761.5 L634.5 761.5" data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M384.5 610.5 L384.5 912.5" data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M634.5 610.5 L634.5 912.5" data-name="drawable" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="384.5" y="601" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="drawable">drawable</text>
  <text x="142.5" y="632" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">app: src.app</text>
  <text x="142.5" y="647" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">parent: src.app.drawable</text>
  <text x="142.5" y="662" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">root: src.app.drawable</text>
  <text x="142.5" y="677" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">abs_size: table</text>
  <text x="142.5" y="692" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">abs_pos: table</text>
  <text x="142.5" y="707" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">rel_pos: table</text>
  <text x="392.5" y="632" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">pos?: table</text>
  <text x="392.5" y="647" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">size?: table</text>
  <text x="392.5" y="662" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">colors?: table</text>
  <text x="392.5" y="677" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">abs_colors?: table</text>
  <text x="392.5" y="692" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">closed?: boolean</text>
  <text x="392.5" y="707" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">expander?: boolean</text>
  <text x="142.5" y="783" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">init()</text>
  <text x="142.5" y="798" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">draw()</text>
  <text x="142.5" y="813" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">draw_recursive()</text>
  <text x="142.5" y="828" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">update_geometry()</text>
  <text x="142.5" y="843" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">update_geometry_recursive()</text>
  <text x="142.5" y="858" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">update_size()</text>
  <text x="142.5" y="873" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">update_pos()</text>
  <text x="142.5" y="888" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">update_expand()</text>
  <text x="142.5" y="903" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">update_colors()</text>
  <text x="392.5" y="783" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">on_draw?()</text>
  <text x="392.5" y="798" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">on_init?()</text>
  <text x="392.5" y="813" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">on_hover?()</text>
  <text x="392.5" y="828" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="drawable">on_click?()</text>
  <rect x="395.5" y="952.5" height="139" width="172" data-name="skin" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M395.5 983.5 L567.5 983.5" data-name="skin" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M395.5 1014.5 L567.5 1014.5" data-name="skin" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M395.5 1060.5 L567.5 1060.5" data-name="skin" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="481.5" y="974" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="skin">skin</text>
  <text x="403.5" y="1005" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="skin">atlas</text>
  <text x="403.5" y="1036" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="skin">grid?: lib.image.grid</text>
  <text x="403.5" y="1051" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="skin">marks?: table</text>
  <text x="403.5" y="1082" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="skin">init()</text>
  <rect x="84.5" y="312.5" height="198" width="233" data-name="win" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M84.5 343.5 L317.5 343.5" data-name="win" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M84.5 419.5 L317.5 419.5" data-name="win" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="201" y="334" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="win">win</text>
  <text x="92.5" y="365" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">parent: nil</text>
  <text x="92.5" y="380" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">flags: table</text>
  <text x="92.5" y="395" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">scale: integer</text>
  <text x="92.5" y="410" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">hovered: src.app.drawable</text>
  <text x="92.5" y="441" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">init()</text>
  <text x="92.5" y="456" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">resize(w, h)</text>
  <text x="92.5" y="471" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">keypressed(key)</text>
  <text x="92.5" y="486" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">mousemoved(x, y)</text>
  <text x="92.5" y="501" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="win">mousepressed(x, y, button)</text>
  <rect x="357.5" y="314.5" height="225" width="419" data-name="gui" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M357.5 314.5 L357.5 283.5 L397.5 283.5 L397.5 314.5 Z" data-name="gui" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M357.5 314.5 L776.5 314.5" data-name="gui" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="365.5" y="305" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="gui">gui</text>
  <rect x="385.5" y="342.5" height="169" width="171" data-name="text" style="stroke:#33322E;fill:#D2AA99;stroke-dasharray:6 6;stroke-width:3;"></rect>
  <path d="M385.5 373.5 L556.5 373.5" data-name="text" style="stroke:#33322E;fill:none;stroke-dasharray:6 6;stroke-width:3;"></path>
  <path d="M385.5 404.5 L556.5 404.5" data-name="text" style="stroke:#33322E;fill:none;stroke-dasharray:6 6;stroke-width:3;"></path>
  <path d="M385.5 450.5 L556.5 450.5" data-name="text" style="stroke:#33322E;fill:none;stroke-dasharray:6 6;stroke-width:3;"></path>
  <text x="471" y="364" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="text">text</text>
  <text x="393.5" y="395" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="text">text: string</text>
  <text x="393.5" y="426" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="text">text_obj?: love.Text</text>
  <text x="393.5" y="441" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="text">wrap?: boolean</text>
  <text x="393.5" y="472" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="text">init()</text>
  <text x="393.5" y="487" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="text">update()</text>
  <text x="393.5" y="502" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="text">draw()</text>
  <rect x="596.5" y="350.5" height="153" width="152" data-name="rect" style="stroke:#33322E;fill:#fdf6e3;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M596.5 381.5 L748.5 381.5" data-name="rect" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <path d="M596.5 427.5 L748.5 427.5" data-name="rect" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="672.5" y="372" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="rect">rect</text>
  <text x="604.5" y="403" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="rect">skin?</text>
  <text x="604.5" y="418" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="rect">image?</text>
  <text x="604.5" y="449" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="rect">init()</text>
  <text x="604.5" y="464" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="rect">update_expand()</text>
  <text x="604.5" y="479" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="rect">update_image()</text>
  <text x="604.5" y="494" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="rect">draw()</text>
  <rect x="216.5" y="976.5" height="92" width="139" data-name="stack" style="stroke:#33322E;fill:#eee8d5;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M216.5 1007.5 L355.5 1007.5" data-name="stack" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="286" y="998" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="stack">stack</text>
  <text x="224.5" y="1029" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="stack">push(drawable)</text>
  <text x="224.5" y="1044" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="stack">pop(element)</text>
  <text x="224.5" y="1059" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="stack">touch(point)</text>
  <rect x="333.5" y="1175.5" height="107" width="194" data-name="palettes" style="stroke:#33322E;fill:#fdf6e3;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M333.5 1206.5 L527.5 1206.5" data-name="palettes" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="430.5" y="1197" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="palettes">palettes</text>
  <text x="341.5" y="1228" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="palettes">main: lib.image.palette</text>
  <text x="341.5" y="1243" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="palettes">name_to_color: table</text>
  <text x="341.5" y="1258" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="palettes">name_to_index: table</text>
  <text x="341.5" y="1273" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="palettes">names: table</text>
  <rect x="567.5" y="1190.5" height="77" width="296" data-name="skins" style="stroke:#33322E;fill:#fdf6e3;stroke-dasharray:none;stroke-width:3;"></rect>
  <path d="M567.5 1221.5 L863.5 1221.5" data-name="skins" style="stroke:#33322E;fill:none;stroke-dasharray:none;stroke-width:3;"></path>
  <text x="715.5" y="1212" style="fill: #33322E;font:bold  12pt Helvetica, Helvetica, sans-serif;text-anchor: middle;" data-name="skins">skins</text>
  <text x="575.5" y="1243" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="skins">gui: src.app.drawable.skin</text>
  <text x="575.5" y="1258" style="fill: #33322E;font:normal  12pt Helvetica, Helvetica, sans-serif;" data-name="skins">mc_gui_rect: src.app.drawable.skin</text>
</svg>